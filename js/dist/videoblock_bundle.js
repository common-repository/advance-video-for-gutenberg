!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e){t.exports=React},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=i(2),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){if(null!=this.props.attributes.src){var t={width:"100%",height:"100%"};return""!=this.props.attributes.align&&(t.textAlign=this.props.attributes.align),o.createElement("figure",{className:"rnAdvanceVideo",style:t},this.GetVideoControl())}},e.prototype.GetVideoControl=function(){var t=this,e={width:"100%",height:"100%"};this.props.attributes.width>=0&&(e.width=this.props.attributes.width),e.display="inline-block";var i=o.createElement("div",{style:e},o.createElement("video",{src:this.props.attributes.src,controls:this.props.attributes.showControls,loop:this.props.attributes.loop,autoPlay:this.props.attributes.autoPlay}));return this.props.IsDesign?o.createElement(s.default,{className:"rnVideoResizer"+(this.props.isSelected?" is-focused":""),maxWidth:"100%",size:e,style:{display:"inline-block"},lockAspectRatio:!0,onResizeStart:function(){t.props.setAttributes({width:-1,height:-1}),t.props.toggleSelection(!1)},onResizeStop:function(e,i,n,r){t.props.setAttributes({width:parseInt(n.offsetWidth),height:parseInt(n.offsetHeight)}),t.props.toggleSelection(!0)},enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},handleClasses:{topRight:"rnAdvanceVideo__resize-handler-top-right",bottomRight:"rnAdvanceVideo__resize-handler-bottom-right",topLeft:"rnAdvanceVideo__resize-handler-top-left",bottomLeft:"rnAdvanceVideo__resize-handler-bottom-left"}},i):i},e}(o.Component);e.VideoControl=a},function(t,e,i){"use strict";i.r(e);var n=i(0),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},u={base:{position:"absolute",userSelect:"none",MsUserSelect:"none"},top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},l=function(t){return Object(n.createElement)("div",{className:t.className,style:s({},u.base,u[t.direction],t.replaceStyles||{}),onMouseDown:function(e){t.onResizeStart(e,t.direction)},onTouchStart:function(e){t.onResizeStart(e,t.direction)}},t.children)},c={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},h={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"},p=function(t,e,i){return Math.max(Math.min(t,i),e)},d=function(t,e){return Math.round(t/e)*e},f=function(t,e){return t.substr(t.length-e.length,e.length)===e},v=function(t){return f(t.toString(),"px")?t.toString():f(t.toString(),"%")?t.toString():t+"px"},b=["style","className","grid","bounds","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent"],g=function(t){function e(t){r(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={isResizing:!1,resizeCursor:"auto",width:void 0===(i.propsSize&&i.propsSize.width)?"auto":i.propsSize&&i.propsSize.width,height:void 0===(i.propsSize&&i.propsSize.height)?"auto":i.propsSize&&i.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0}},i.updateExtendsProps(t),i.onResizeStart=i.onResizeStart.bind(i),i.onMouseMove=i.onMouseMove.bind(i),i.onMouseUp=i.onMouseUp.bind(i),"undefined"!=typeof window&&(window.addEventListener("mouseup",i.onMouseUp),window.addEventListener("mousemove",i.onMouseMove),window.addEventListener("mouseleave",i.onMouseUp),window.addEventListener("touchmove",i.onMouseMove),window.addEventListener("touchend",i.onMouseUp)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n["Component"]),o(e,[{key:"updateExtendsProps",value:function(t){this.extendsProps=Object.keys(t).reduce(function(e,i){return-1!==b.indexOf(i)?e:(e[i]=t[i],e)},{})}},{key:"getParentSize",value:function(){var t=this.parentNode.querySelector(".__resizable_base__");if(!t)return{width:window.innerWidth,height:window.innerHeight};var e=!1,i=this.parentNode.style.flexWrap,n=t.style.minWidth;"wrap"!==i&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.minWidth="100%";var r={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=i),t.style.minWidth=n,r}},{key:"componentDidMount",value:function(){var t=this.size;this.setState({width:this.state.width||t.width,height:this.state.height||t.height});var e=this.parentNode;if(e instanceof HTMLElement&&!e.querySelector(".__resizable_base__")){var i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.transform="scale(0, 0)",i.style.left="-2147483647px",i.style.flex="0",i.classList?i.classList.add("__resizable_base__"):i.className+="__resizable_base__",e.appendChild(i)}}},{key:"componentWillReceiveProps",value:function(t){this.updateExtendsProps(t)}},{key:"componentWillUnmount",value:function(){if("undefined"!=typeof window){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseleave",this.onMouseUp),window.removeEventListener("touchmove",this.onMouseMove),window.removeEventListener("touchend",this.onMouseUp);var t=this.parentNode,e=document.getElementById(this.baseSizeId);if(!e||!t)return;if(!(t instanceof HTMLElement&&e instanceof Node))return;t.removeChild(e)}}},{key:"calculateNewSize",value:function(t,e){var i=this.propsSize&&this.propsSize[e];return"auto"!==this.state[e]||this.state.original[e]!==t||void 0!==i&&"auto"!==i?t:"auto"}},{key:"onResizeStart",value:function(t,e){var i=0,n=0;if(t.nativeEvent instanceof MouseEvent){if(i=t.nativeEvent.clientX,n=t.nativeEvent.clientY,3===t.nativeEvent.which)return}else t.nativeEvent instanceof TouchEvent&&(i=t.nativeEvent.touches[0].clientX,n=t.nativeEvent.touches[0].clientY);this.props.onResizeStart&&this.props.onResizeStart(t,e,this.resizable),this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.setState({original:{x:i,y:n,width:this.size.width,height:this.size.height},isResizing:!0,resizeCursor:window.getComputedStyle(t.target).cursor,direction:e})}},{key:"onMouseMove",value:function(t){if(this.state.isResizing){var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY,n=this.state,r=n.direction,o=n.original,s=n.width,a=n.height,u=this.props,l=u.lockAspectRatio,c=u.lockAspectRatioExtraHeight,h=u.lockAspectRatioExtraWidth,v=this.props,b=v.maxWidth,g=v.maxHeight,m=v.minWidth,y=v.minHeight,w=this.getParentSize();if(b&&"string"==typeof b&&f(b,"%")){var _=Number(b.replace("%",""))/100;b=w.width*_}if(g&&"string"==typeof g&&f(g,"%")){var z=Number(g.replace("%",""))/100;g=w.height*z}if(m&&"string"==typeof m&&f(m,"%")){var S=Number(m.replace("%",""))/100;m=w.width*S}if(y&&"string"==typeof y&&f(y,"%")){var x=Number(y.replace("%",""))/100;y=w.height*x}b=void 0===b?void 0:Number(b),g=void 0===g?void 0:Number(g),m=void 0===m?void 0:Number(m),y=void 0===y?void 0:Number(y);var E="number"==typeof l?l:o.width/o.height,R=o.width,k=o.height;if(/right/i.test(r)&&(R=o.width+(e-o.x),l&&(k=(R-h)/E+c)),/left/i.test(r)&&(R=o.width-(e-o.x),l&&(k=(R-h)/E+c)),/bottom/i.test(r)&&(k=o.height+(i-o.y),l&&(R=(k-c)*E+h)),/top/i.test(r)&&(k=o.height-(i-o.y),l&&(R=(k-c)*E+h)),"parent"===this.props.bounds){var M=this.parentNode;if(M instanceof HTMLElement){var A=M.getBoundingClientRect(),O=A.left,C=A.top,j=this.resizable.getBoundingClientRect(),P=j.left,U=j.top,N=M.offsetWidth+(O-P),T=M.offsetHeight+(C-U);b=b&&b<N?b:N,g=g&&g<T?g:T}}else if("window"===this.props.bounds){if("undefined"!=typeof window){var L=this.resizable.getBoundingClientRect(),W=L.left,V=L.top,H=window.innerWidth-W,B=window.innerHeight-V;b=b&&b<H?b:H,g=g&&g<B?g:B}}else if(this.props.bounds instanceof HTMLElement){var F=this.props.bounds.getBoundingClientRect(),I=F.left,D=F.top,Y=this.resizable.getBoundingClientRect(),G=Y.left,X=Y.top;if(!(this.props.bounds instanceof HTMLElement))return;var q=this.props.bounds.offsetWidth+(I-G),K=this.props.bounds.offsetHeight+(D-X);b=b&&b<q?b:q,g=g&&g<K?g:K}var J=void 0===m?10:m,Q=void 0===b||b<0?R:b,Z=void 0===y?10:y,$=void 0===g||g<0?k:g;if(l){var tt=(Z-c)*E+h,et=($-c)*E+h,it=(J-h)/E+c,nt=(Q-h)/E+c,rt=Math.max(J,tt),ot=Math.min(Q,et),st=Math.max(Z,it),at=Math.min($,nt);R=p(R,rt,ot),k=p(k,st,at)}else R=p(R,J,Q),k=p(k,Z,$);this.props.grid&&(R=d(R,this.props.grid[0])),this.props.grid&&(k=d(k,this.props.grid[1]));var ut={width:R-o.width,height:k-o.height};if(s&&"string"==typeof s&&f(s,"%"))R=R/w.width*100+"%";if(a&&"string"==typeof a&&f(a,"%"))k=k/w.height*100+"%";this.setState({width:this.calculateNewSize(R,"width"),height:this.calculateNewSize(k,"height")}),this.props.onResize&&this.props.onResize(t,r,this.resizable,ut)}}},{key:"onMouseUp",value:function(t){var e=this.state,i=e.isResizing,n=e.direction,r=e.original;if(i){var o={width:this.size.width-r.width,height:this.size.height-r.height};this.props.onResizeStop&&this.props.onResizeStop(t,n,this.resizable,o),this.props.size&&this.setState(this.props.size),this.setState({isResizing:!1,resizeCursor:"auto"})}}},{key:"updateSize",value:function(t){this.setState({width:t.width,height:t.height})}},{key:"renderResizer",value:function(){var t=this,e=this.props,i=e.enable,r=e.handleStyles,o=e.handleClasses,s=e.handleWrapperStyle,a=e.handleWrapperClass,u=e.handleComponent;if(!i)return null;var c=Object.keys(i).map(function(e){return!1!==i[e]?Object(n.createElement)(l,{key:e,direction:e,onResizeStart:t.onResizeStart,replaceStyles:r&&r[e],className:o&&o[e]},u&&u[e]?Object(n.createElement)(u[e]):null):null});return Object(n.createElement)("span",{className:a,style:s},c)}},{key:"render",value:function(){var t=this,e=this.state.isResizing?c:h;return Object(n.createElement)("div",s({ref:function(e){e&&(t.resizable=e)},style:s({position:"relative"},e,this.props.style,this.sizeStyle,{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box"}),className:this.props.className},this.extendsProps),this.state.isResizing&&Object(n.createElement)("div",{style:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:""+(this.state.resizeCursor||"auto"),opacity:"0",position:"fixed",zIndex:"9999",top:"0",left:"0",bottom:"0",right:"0"}}),this.props.children,this.renderResizer())}},{key:"parentNode",get:function(){return this.resizable.parentNode}},{key:"propsSize",get:function(){return this.props.size||this.props.defaultSize}},{key:"size",get:function(){var t=0,e=0;return"undefined"!=typeof window&&(t=this.resizable.offsetWidth,e=this.resizable.offsetHeight),{width:t,height:e}}},{key:"sizeStyle",get:function(){var t=this,e=this.props.size,i=function(e){if(void 0===t.state[e]||"auto"===t.state[e])return"auto";if(t.propsSize&&t.propsSize[e]&&f(t.propsSize[e].toString(),"%")){if(f(t.state[e].toString(),"%"))return t.state[e].toString();var i=t.getParentSize();return Number(t.state[e].toString().replace("px",""))/i[e]*100+"%"}return v(t.state[e])};return{width:e&&e.width&&!this.state.isResizing?v(e.width):i("width"),height:e&&e.height&&!this.state.isResizing?v(e.height):i("height")}}}]),e}();g.baseSizeId=0,g.defaultProps={onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0},e.default=g},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=wp.blocks.MediaUpload,a=wp.components.Button,u=wp.components.FormFileUpload,l=wp.components.Placeholder,c=wp.utils.mediaUpload,h=function(t){function e(e){var i=t.call(this,e)||this;return i.SelectVideo=i.SelectVideo.bind(i),i.UploadedFromFile=i.UploadedFromFile.bind(i),i.state={},i}return r(e,t),e.prototype.render=function(){return o.createElement(l,{key:"placeholder",icon:"media-video",label:"Video",instructions:"Select a video file from your library, or upload a new one"},o.createElement(u,{isLarge:!0,className:"wp-block-video__upload-button",onChange:this.UploadedFromFile,accept:"video/*"},"Upload"),",",o.createElement(s,{onSelect:this.SelectVideo,type:"video",id:"rnVideo",render:function(t){var e=t.open;return o.createElement(a,{isLarge:!0,onClick:e},"Add from Media Library")}}))},e.prototype.SelectVideo=function(t){this.props.setAttributes({src:t.url,id:t.id}),this.props.VideoSelected({src:t.url,id:t.id})},e.prototype.UploadedFromFile=function(t){var e=this;c(t.target.files,function(t){var i=t[0];return e.SelectVideo(i)},"video")},e}(o.Component);e.VideoUploader=h},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,l=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=a(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new f(t,e)),1!==l.length||c||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){(function(e,i){var n;n=function(){"use strict";function t(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,o=void 0,s=void 0,a=function(t,e){f[r]=t,f[r+1]=e,2===(r+=2)&&(s?s(v):w())};var u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(v,1)}}var f=new Array(1e3);function v(){for(var t=0;t<r;t+=2){(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0}r=0}var b,g,m,y,w=void 0;function _(t,e){var i=this,n=new this.constructor(x);void 0===n[S]&&V(n);var r=i._state;if(r){var o=arguments[r-1];a(function(){return L(r,n,o,i._result)})}else N(i,n,t,e);return n}function z(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(x);return C(e,t),e}h?w=function(){return e.nextTick(v)}:c?(g=0,m=new c(v),y=document.createTextNode(""),m.observe(y,{characterData:!0}),w=function(){y.data=g=++g%2}):p?((b=new MessageChannel).port1.onmessage=v,w=function(){return b.port2.postMessage(0)}):w=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(v)}:d()}catch(t){return d()}}():d();var S=Math.random().toString(36).substring(2);function x(){}var E=void 0,R=1,k=2,M={error:null};function A(t){try{return t.then}catch(t){return M.error=t,M}}function O(e,i,n){i.constructor===e.constructor&&n===_&&i.constructor.resolve===z?function(t,e){e._state===R?P(t,e._result):e._state===k?U(t,e._result):N(e,void 0,function(e){return C(t,e)},function(e){return U(t,e)})}(e,i):n===M?(U(e,M.error),M.error=null):void 0===n?P(e,i):t(n)?function(t,e,i){a(function(t){var n=!1,r=function(t,e,i,n){try{t.call(e,i,n)}catch(t){return t}}(i,e,function(i){n||(n=!0,e!==i?C(t,i):P(t,i))},function(e){n||(n=!0,U(t,e))},t._label);!n&&r&&(n=!0,U(t,r))},t)}(e,i,n):P(e,i)}function C(t,e){var i,n;t===e?U(t,new TypeError("You cannot resolve a promise with itself")):(n=typeof(i=e),null===i||"object"!==n&&"function"!==n?P(t,e):O(t,e,A(e)))}function j(t){t._onerror&&t._onerror(t._result),T(t)}function P(t,e){t._state===E&&(t._result=e,t._state=R,0!==t._subscribers.length&&a(T,t))}function U(t,e){t._state===E&&(t._state=k,t._result=e,a(j,t))}function N(t,e,i,n){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+R]=i,r[o+k]=n,0===o&&t._state&&a(T,t)}function T(t){var e=t._subscribers,i=t._state;if(0!==e.length){for(var n=void 0,r=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],r=e[s+i],n?L(i,n,r,o):r(o);t._subscribers.length=0}}function L(e,i,n,r){var o=t(n),s=void 0,a=void 0,u=void 0,l=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return M.error=t,M}}(n,r))===M?(l=!0,a=s.error,s.error=null):u=!0,i===s)return void U(i,new TypeError("A promises callback cannot return that same promise."))}else s=r,u=!0;i._state!==E||(o&&u?C(i,s):l?U(i,a):e===R?P(i,s):e===k&&U(i,s))}var W=0;function V(t){t[S]=W++,t._state=void 0,t._result=void 0,t._subscribers=[]}var H=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(x),this.promise[S]||V(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&P(this.promise,this._result))):U(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===E&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===z){var r=A(t);if(r===_&&t._state!==E)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===B){var o=new i(x);O(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,i){var n=this.promise;n._state===E&&(this._remaining--,t===k?U(n,i):this._result[e]=i),0===this._remaining&&P(n,this._result)},t.prototype._willSettleAt=function(t,e){var i=this;N(t,void 0,function(t){return i._settledAt(R,e,t)},function(t){return i._settledAt(k,e,t)})},t}();var B=function(){function t(e){this[S]=W++,this._result=this._state=void 0,this._subscribers=[],x!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){C(t,e)},function(e){U(t,e)})}catch(e){U(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){throw i})})},t}();return B.prototype.then=_,B.all=function(t){return new H(this,t).promise},B.race=function(t){var e=this;return n(t)?new e(function(i,n){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(i,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},B.resolve=z,B.reject=function(t){var e=new this(x);return U(e,t),e},B._setScheduler=function(t){s=t},B._setAsap=function(t){a=t},B._asap=a,B.polyfill=function(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=B},B.Promise=B,B},t.exports=n()}).call(this,i(5),i(4))},function(t,e,i){"use strict";(function(t){var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s=this&&this.__awaiter||function(e,i,n,r){return new(n||(n=t))(function(t,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(e){e.done?t(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,i||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var u=i(0),l=i(3),c=i(1),h=wp.components.Placeholder,p=wp.blocks.InspectorControls,d=wp.components.CheckboxControl,f=wp.blocks.BlockControls,v=wp.blocks.BlockAlignmentToolbar,b=wp.components.Toolbar,g=function(t){function e(e){var i=t.call(this,e)||this;return i.ResetSize=i.ResetSize.bind(i),i.VideoSelected=i.VideoSelected.bind(i),i.state={src:i.props.attributes.src,id:i.props.attributes.id,fileUrl:i.props.attributes.fileUrl},i}return r(e,t),e.prototype.componentDidMount=function(){return s(this,void 0,void 0,function(){var t,e=this;return a(this,function(i){switch(i.label){case 0:return null!=this.props.attributes.id||null==this.props.attributes.fileUrl||0!==this.props.attributes.fileUrl.indexOf("blob:")?[3,4]:[4,fetch(this.props.attributes.fileUrl)];case 1:return[4,i.sent().blob()];case 2:return t=i.sent(),[4,wp.utils.mediaUpload([t],function(t){var i=t[0];null!=i.id&&e.props.setAttributes({src:i.url,id:i.id})},"video")];case 3:i.sent(),i.label=4;case 4:return[2]}})})},e.prototype.render=function(){var t=this,e=null;if(null==this.props.attributes.id&&null!=this.props.attributes.fileUrl)return u.createElement("figure",null,u.createElement(h,{key:"placeholder",icon:"media-video",label:"Uploading video, please wait..."},u.createElement("i",{className:"spinner is-active","aria-hidden":"true"})));if(null==this.props.attributes.src)e=u.createElement(l.VideoUploader,{VideoSelected:this.VideoSelected,setAttributes:this.props.setAttributes});else{var i={width:"100%",height:"100%"};this.props.attributes.width>=0&&(i.width=this.props.attributes.width),this.props.attributes.height>=0&&(i.height=this.props.attributes.height),e=u.createElement(c.VideoControl,o({IsDesign:!0},this.props))}return[this.props.isSelected&&u.createElement(p,null,u.createElement(d,{label:"Show Controls",checked:this.props.attributes.showControls,onChange:function(e){t.props.setAttributes({showControls:e})}}),u.createElement(d,{label:"AutoPlay",checked:this.props.attributes.autoPlay,onChange:function(e){t.props.setAttributes({autoPlay:e})}}),u.createElement(d,{label:"Loop",checked:this.props.attributes.loop,onChange:function(e){t.props.setAttributes({loop:e})}})),this.GetBlockControls(),e]},e.prototype.VideoSelected=function(t){this.setState({src:this.props.attributes.src,id:this.props.attributes.id})},e.prototype.GetBlockControls=function(){var t=this;return this.props.attributes.width>=0||this.props.attributes.height>=0?u.createElement(f,null,u.createElement(v,{value:this.props.attributes.align,onChange:function(e){t.props.setAttributes({align:e})}}),u.createElement(b,null,u.createElement("button",{className:"resizeButton components-button components-icon-button components-toolbar__control",style:{padding:0,margin:0},onClick:this.ResetSize},u.createElement("i",{title:"Reset Size",className:"fa fa-arrows-alt","aria-hidden":"true",style:{cursor:"pointer"}})))):null},e.prototype.ResetSize=function(){this.props.setAttributes({width:-1,height:-1,align:""})},e}(u.Component);e.AdvanceVideoDesign=g}).call(this,i(6))},function(t,e,i){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),o=i(0),s=i(1);!function(){var t=wp.i18n.__;wp.element.createElement;(0,wp.blocks.registerBlockType)("rednao/advance-video",{title:t("Advance Video"),icon:"format-video",category:"common",attributes:{id:{type:"number"},src:{type:"string"},fileUrl:{type:"string"},fileName:{type:"string"},autoPlay:{type:"boolean"},showControls:{type:"boolean",default:!0},loop:{type:"boolean"},width:{type:"number",default:-1},height:{type:"number",default:-1},align:{type:"string",default:""}},edit:r.AdvanceVideoDesign,save:function(t){return o.createElement(s.VideoControl,n({},t))},transforms:{from:[{type:"files",isMatch:function(t){return 1===t.length&&0===t[0].type.indexOf("video/")},transform:function(t){var e=wp.blocks.createBlock,i=t[0];return e("rednao/advance-video",{fileUrl:window.URL.createObjectURL(i),fileName:i.name})}}]}})}()},function(t,e,i){t.exports=i(8)}]);
//# sourceMappingURL=videoblock_bundle.js.map